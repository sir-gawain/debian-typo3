Description: Remove websvg from TYPO3 core
 Websvg provides a swf file for emulating SVG on many browsers. This swf file
 can not be build with tools in main, therefore it is removed during build.
 This patch removes the embedding code for this swf from the TYPO3 core.
Author: Christian Welzel <gawain@camlann.de>
Last-Update: 2012-10-23

--- typo3.orig/typo3/sysext/core/Classes/Page/PageRenderer.php
+++ typo3/typo3/sysext/core/Classes/Page/PageRenderer.php
@@ -298,11 +298,6 @@
 	protected $extJsPath = 'contrib/extjs/';
 
 	/**
-	 * @var string
-	 */
-	protected $svgPath = 'contrib/websvg/';
-
-	/**
 	 * The local directory where one can find jQuery versions and plugins
 	 *
 	 * @var string
@@ -462,18 +457,6 @@
 	protected $endingSlash = '';
 
 	/**
-	 * SVG library
-	 *
-	 * @var boolean
-	 */
-	protected $addSvg = FALSE;
-
-	/**
-	 * @var boolean
-	 */
-	protected $enableSvgDebug = FALSE;
-
-	/**
 	 * Used by BE modules
 	 *
 	 * @var null|string
@@ -729,16 +712,6 @@
 		$this->extJsPath = $path;
 	}
 
-	/**
-	 * Sets Path for SVG library (websvg)
-	 *
-	 * @param string $path
-	 * @return void
-	 */
-	public function setSvgPath($path) {
-		$this->svgPath = $path;
-	}
-
 	/*****************************************************/
 	/*                                                   */
 	/*  Public Enablers / Disablers                      */
@@ -885,7 +858,6 @@
 		$this->enableExtCoreDebug = TRUE;
 		$this->enableExtJsDebug = TRUE;
 		$this->enableJqueryDebug = TRUE;
-		$this->enableSvgDebug = TRUE;
 	}
 
 	/*****************************************************/
@@ -1102,15 +1074,6 @@
 	}
 
 	/**
-	 * Gets Path for SVG library (relative to typo3 directory)
-	 *
-	 * @return string
-	 */
-	public function getSvgPath() {
-		return $this->svgPath;
-	}
-
-	/**
 	 * Gets the inline language labels.
 	 *
 	 * @return array The inline language labels
@@ -1705,33 +1668,6 @@
 	}
 
 	/**
-	 * Call function if you need the SVG library
-	 *
-	 * @return void
-	 */
-	public function loadSvg() {
-		$this->addSvg = TRUE;
-	}
-
-	/**
-	 * Call this function to load debug version of ExtJS. Use this for development only
-	 *
-	 * @return void
-	 */
-	public function enableSvgDebug() {
-		$this->enableSvgDebug = TRUE;
-	}
-
-	/**
-	 * Call this function to force flash usage with SVG library
-	 *
-	 * @return void
-	 */
-	public function svgForceFlash() {
-		$this->addMetaTag('<meta name="svg.render.forceflash" content="true" />');
-	}
-
-	/**
 	 * Call this function to load debug version of ExtJS. Use this for development only
 	 *
 	 * @return void
@@ -2074,7 +2010,7 @@
 
 	/**
 	 * Helper function for render the main JavaScript libraries,
-	 * currently: RequireJS, jQuery, PrototypeJS, Scriptaculous, SVG, ExtJs
+	 * currently: RequireJS, jQuery, PrototypeJS, Scriptaculous, ExtJs
 	 *
 	 * @return string Content with JavaScript libraries
 	 */
@@ -2089,9 +2025,6 @@
 			$out .= '<script src="' . $this->processJsFile(($this->backPath . $this->requireJsPath . 'require.js')) . '" type="text/javascript"></script>' . LF;
 		}
 
-		if ($this->addSvg) {
-			$out .= '<script src="' . $this->processJsFile(($this->backPath . $this->svgPath . 'svg.js')) . '" data-path="' . $this->backPath . $this->svgPath . '"' . ($this->enableSvgDebug ? ' data-debug="true"' : '') . '></script>' . LF;
-		}
 		// Include jQuery Core for each namespace, depending on the version and source
 		if (!empty($this->jQueryVersions)) {
 			foreach ($this->jQueryVersions as $namespace => $jQueryVersion) {
--- typo3.orig/typo3/sysext/frontend/Classes/ContentObject/ContentObjectRenderer.php
+++ typo3/typo3/sysext/frontend/Classes/ContentObject/ContentObjectRenderer.php
@@ -805,7 +805,6 @@
 			'SWFOBJECT' => 'ShockwaveFlashObject',
 			'FLOWPLAYER' => 'FlowPlayer',
 			'QTOBJECT' => 'QuicktimeObject',
-			'SVG' => 'ScalableVectorGraphics',
 			'EDITPANEL' => 'EditPanel',
 		);
 		$name = $classMapping[$name];
@@ -1204,16 +1203,6 @@
 		return $this->getContentObject('QTOBJECT')->render($conf);
 	}
 
-	/**
-	 * Rendering the cObject, SVG
-	 *
-	 * @param array $conf Array of TypoScript properties
-	 * @return string Output
-	 */
-	public function SVG($conf) {
-		return $this->getContentObject('SVG')->render($conf);
-	}
-
 	/************************************
 	 *
 	 * Various helper functions for content objects:
--- typo3.orig/typo3/sysext/frontend/Classes/ContentObject/ScalableVectorGraphicsContentObject.php
+++ /dev/null
@@ -1,97 +0,0 @@
-<?php
-namespace TYPO3\CMS\Frontend\ContentObject;
-
-/***************************************************************
- *  Copyright notice
- *
- *  (c) 2010-2011 Xavier Perseguers <typo3@perseguers.ch>
- *  (c) 2010-2011 Steffen Kamper <steffen@typo3.org>
- *  All rights reserved
- *
- *  This script is part of the TYPO3 project. The TYPO3 project is
- *  free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  The GNU General Public License can be found at
- *  http://www.gnu.org/copyleft/gpl.html.
- *  A copy is found in the textfile GPL.txt and important notices to the license
- *  from the author is found in LICENSE.txt distributed with these scripts.
- *
- *
- *  This script is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  This copyright notice MUST APPEAR in all copies of the script!
- ***************************************************************/
-/**
- * Contains RESTORE_REGISTER class object.
- *
- * @author Xavier Perseguers <typo3@perseguers.ch>
- * @author Steffen Kamper <steffen@typo3.org>
- */
-class ScalableVectorGraphicsContentObject extends \TYPO3\CMS\Frontend\ContentObject\AbstractContentObject {
-
-	/**
-	 * Rendering the cObject, SVG
-	 *
-	 * @param array $conf Array of TypoScript properties
-	 * @return string Empty string (the cObject only sets internal data!)
-	 */
-	public function render($conf = array()) {
-		$width = isset($conf['width.']) ? $this->cObj->stdWrap($conf['width'], $conf['width.']) : $conf['width'];
-		if (!$width) {
-			$width = 600;
-		}
-		$height = isset($conf['height.']) ? $this->cObj->stdWrap($conf['height'], $conf['height.']) : $conf['height'];
-		if (!$height) {
-			$height = 400;
-		}
-		$src = isset($conf['src.']) ? $this->cObj->stdWrap($conf['src'], $conf['src.']) : $conf['src'];
-		if (!$src) {
-			$src = NULL;
-		}
-		$value = isset($conf['value.']) ? $this->cObj->stdWrap($conf['value'], $conf['value.']) : $conf['value'];
-		$noscript = isset($conf['noscript.']) ? $this->cObj->stdWrap($conf['noscript'], $conf['noscript.']) : $conf['noscript'];
-		if ($src) {
-			$content = '
-
-					<!--[if IE]>
-					<object src="' . $src . '" classid="image/svg+xml" width="' . $width . '" height="' . $height . '">
-					<![endif]-->
-					<!--[if !IE]>-->
-					<object data="' . $src . '" type="image/svg+xml" width="' . $width . '" height="' . $height . '">
-					<!--<![endif]-->
-					' . $noscript . '
-					</object>
-
-			';
-		} else {
-			$content = '
-				<script type="image/svg+xml">
-					<svg xmlns="http://www.w3.org/2000/svg"
-					xmlns:xlink="http://www.w3.org/1999/xlink"
-					width="' . $width . '"
-					height="' . $height . '">
-			' . $value . '
-				</svg>
-				</script>
-				<noscript>
-			' . $noscript . '
-				</noscript>
-			';
-		}
-		$GLOBALS['TSFE']->getPageRenderer()->loadSvg();
-		if (isset($conf['stdWrap.'])) {
-			$content = $this->cObj->stdWrap($content, $conf['stdWrap.']);
-		}
-		return $content;
-	}
-
-}
-
-
-?>
\ No newline at end of file
--- typo3.orig/typo3/sysext/frontend/Classes/Page/PageGenerator.php
+++ typo3/typo3/sysext/frontend/Classes/Page/PageGenerator.php
@@ -530,15 +530,6 @@
 		}
 		// Javascript Libraries
 		if (is_array($GLOBALS['TSFE']->pSetup['javascriptLibs.'])) {
-			if ($GLOBALS['TSFE']->pSetup['javascriptLibs.']['SVG']) {
-				$pageRenderer->loadSvg();
-				if ($GLOBALS['TSFE']->pSetup['javascriptLibs.']['SVG.']['debug']) {
-					$pageRenderer->enableSvgDebug();
-				}
-				if ($GLOBALS['TSFE']->pSetup['javascriptLibs.']['SVG.']['forceFlash']) {
-					$pageRenderer->svgForceFlash();
-				}
-			}
 			if ($GLOBALS['TSFE']->pSetup['javascriptLibs.']['Prototype']) {
 				$pageRenderer->loadPrototype();
 			}
